[Debug] Initialized SystemUtils for OS: linux
[Debug] is_termux: True
[Information] Using Termux clipboard retrieval.
[Debug] Running command: termux-clipboard-get
[Debug] Command succeeded: termux-clipboard-get
--- file: parsers.py
+++ clipboard
@@ -1,5 +1,4 @@
-# yt_ae_dl/parsers.py
-"""Parsers for yt-dlp and aebndl outputs (matches tests; 
no truncation)."""
+"""Parsers for yt-dlp and aebndl outputs (matches 
tests)."""
 from __future__ import annotations
 
 import re
@@ -7,69 +6,41 @@
 
 
 def sanitize_line(s: str) -> str:
-    """
-    Keep simple to satisfy tests: strip trailing CR/LF 
only.
-    (We deliberately avoid aggressive ANSI stripping here,
since tests
-    provide plain lines.)
-    """
+    # Keep simple to satisfy tests; strip trailing 
newlines.
     return s.rstrip("\r\n")
 
 
 # ----------------- yt-dlp -----------------
 
-# Destination line:
-#   [download] Destination: video.mp4
-_YTDLP_DEST_RE = 
re.compile(r"^\[download\]\s+Destination:\s*(?P<path>.+)$",
re.IGNORECASE)
-
-# Already downloaded line:
-#   [download] video.mp4 has already been downloaded
+_YTDLP_DEST_RE = 
re.compile(r"^\[download\]\s+Destination:\s*(?P<path>.+)$")
 _YTDLP_ALREADY_RE = re.compile(
-    
r"^\[download\]\s+.+?\s+has\s+already\s+been\s+downloaded\s
*$",
-    re.IGNORECASE,
+    
r"^\[download\]\s+.+?\s+has\s+already\s+been\s+downloaded\s
*$", re.IGNORECASE
 )
-
-# Our injected meta line (via --print):
-#   TDMETA\t<id>\t<title>
 _YTDLP_META_RE = 
re.compile(r"^TDMETA\t(?P<id>[^\t]+)\t(?P<title>.*)$")
 
-# Progress line example:
-#   [download] 12.3% of 25.0MiB at 2.5MiB/s ETA 00:11
+# Example: "[download] 12.3% of 25.0MiB at 2.5MiB/s ETA 
00:11"
 _YTDLP_PROGRESS_RE = re.compile(
     r"^[download\]\s+"
     r"(?P<pct>\d+(?:\.\d+)?)%\s+of\s+(?P<total_num>[\d\.]+
)\s*(?P<total_unit>[KMG]?i?B)"
     r"(?:\s+at\s+(?P<speed_num>[\d\.]+)\s*(?P<speed_unit>[
KMG]?i?B)/s)?"
     r"(?:\s+ETA\s+(?P<eta_mm>\d{2}):(?P<eta_ss>\d{2}))?"
     r".*$",
-    re.IGNORECASE,
 )
 
 
 def _to_bytes(num_str: str, unit: str) -> int:
-    """Convert KiB/MiB/GiB (or KB/MB/GB) to bytes."""
     num = float(num_str)
-    unit = (unit or "").upper()
+    unit = unit.upper()
     if unit in ("KB", "KIB"):
         return int(num * 1024)
     if unit in ("MB", "MIB"):
         return int(num * 1024 * 1024)
     if unit in ("GB", "GIB"):
         return int(num * 1024 * 1024 * 1024)
-    # Fallback (rarely used in our patterns)
     return int(num)
 
 
 def parse_ytdlp_line(line: str) -> Optional[Dict]:
-    """
-    Parse a single yt-dlp output line.
-
-    Returns a dict with:
-      - {"event": "meta", "id": ..., "title": ...}
-      - {"event": "destination", "path": ...}
-      - {"event": "already"}
-      - {"event": "progress", "downloaded": int, "total": 
int,
-         "speed_bps": Optional[int], "eta_s": 
Optional[int]}
-    or None if not matched.
-    """
     m = _YTDLP_META_RE.match(line)
     if m:
         return {"event": "meta", "id": m.group("id"), 
"title": m.group("title")}
@@ -86,11 +57,9 @@
         total = _to_bytes(m.group("total_num"), 
m.group("total_unit"))
         pct = float(m.group("pct")) / 100.0
         downloaded = int(total * pct)
-
         speed_bps = None
         if m.group("speed_num") and m.group("speed_unit"):
             speed_bps = _to_bytes(m.group("speed_num"), 
m.group("speed_unit"))
-
         eta_s = None
         if m.group("eta_mm") and m.group("eta_ss"):
             eta_s = int(m.group("eta_mm")) * 60 + 
int(m.group("eta_ss"))
@@ -107,14 +76,11 @@
 
 
 # ----------------- aebndl -----------------
+# Must match tests’ exact lines:
+# "Audio download: 4% | 147/3450 [00:15<04:52, 11.30it/s]"
+# "Video download: 2% | 70/3450 [00:14<24:38, 2.29it/s]"
 
-# Matches:
-#   "Output file name: Dorcel - Luxure ... 2160p.mp4"
 _AEBN_DEST_RE = re.compile(r"^Output file 
name:\s*(?P<path>.+)$", re.IGNORECASE)
-
-# Matches (tests’ exact forms):
-#   "Audio download: 4% | 147/3450 [00:15<04:52, 
11.30it/s]"
-#   "Video download: 2% | 70/3450 [00:14<24:38, 2.29it/s]"
 _AEBN_PROGRESS_RE = re.compile(
     r"^(?P<stream>Audio|Video)\s+download:\s*"
     r"(?P<pct>\d+)%\s*\|\s*(?P<done>\d+)/(?P<total>\d+)\s*
"
@@ -124,16 +90,6 @@
 
 
 def parse_aebndl_line(line: str) -> Optional[Dict]:
-    """
-    Parse a single aebndl output line.
-
-    Returns a dict with:
-      - {"event": "destination", "path": ...}
-      - {"event": "aebn_progress",
-         "stream": "audio"|"video", "segments_done": int,
-         "segments_total": int, "rate_itps": float, 
"eta_s": int}
-    or None if not matched.
-    """
     m = _AEBN_DEST_RE.match(line)
     if m:
         return {"event": "destination", "path": 
m.group("path")}
               clipboard_diff.py Statistics                
┏━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Metric               ┃ Value                            ┃
┡━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ File Path            │ /data/data/com.termux/files/home │
│                      │ /projects/downloads_dlpn/yt_ae_d │
│                      │ l/yt_ae_dl/parsers.py            │
│ File Read            │ Successful                       │
│ File LOC             │ 153                              │
│ Clipboard Status     │ Content retrieved                │
│ Clipboard LOC        │ 109                              │
│ Diff Lines Generated │ 131                              │
│ Differences Found    │ Yes                              │
│ LOC Difference       │ 44                               │
│ Similarity Ratio     │ 0.75                             │
└──────────────────────┴──────────────────────────────────┘
